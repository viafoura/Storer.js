/** Storer.js
 * @copyright Viafoura, Inc. <viafoura.com>
 * @author Shahyar G <github.com/shahyar> for <github.com/viafoura>
 * @license CC-BY 3.0 <creativecommons.org/licenses/by/3.0>: Keep @copyright, @author intact.
 */window.initStorer=function(a,b){function c(a,b){var c={STORE_TYPE:"ref"+a,key:function(a){return b.key(a)},getItem:function(a){return b.getItem(a)},setItem:function(a,c){return b.setItem(a,c)},removeItem:function(a){return b.removeItem(a)},clear:function(){return b.clear()}};return Object.defineProperty(c,"length",{get:function(){return b.length}}),c}function d(a,b){var c=document.createElement("div");return c.STORE_TYPE="DOM"+a,c.key=b.key,c.getItem=b.getItem,c.setItem=b.setItem,c.removeItem=b.removeItem,c.clear=b.clear,Object.defineProperty(c,"length",{get:function(){return b.length}}),c}function e(a){a=(a||"")+n;var c=new RegExp("(?:^|;)\\s*"+a+"[^=]+\\s*=[^;]*","g"),d=new RegExp("^;?\\s*"+a),e=new RegExp("(?:^|;)\\s*[^=]+\\s*=[^;]*","g"),g=new RegExp("^;?\\s*"),h=new Date(1979).toGMTString(),i={STORE_TYPE:"cookieStorage",DEFAULT_DOMAIN:escape(b.default_domain||""),DEFAULT_PATH:escape(b.default_path||""),length:0,key:function(a,b){var c=this.getAll(!1,b);return c[0]?c[0].key:void 0},clear:function(a){for(var b=this.getAll(!1,a),c=b.length;c--;)this.removeItem(b[c].key)},getAll:function(a,b){var f,h=b?g:d,i=document.cookie.match(b?e:c)||[],j=i.length;if(a===!0)for(f={length:j};j--;)f[unescape((i[j]=i[j].split("="))[0].replace(h,""))]=i[j][1];else for(f=[];j--;)f.push({key:unescape((i[j]=i[j].split("="))[0].replace(h,"")),value:i[j][1]});return f},getItem:function(b,c){return b&&this.hasItem(b,c)?(c=document.cookie.match(new RegExp("(?:^|;) *"+escape((c?"":a)+b)+"=([^;]*)(?:;|$)")),c&&c[0]?unescape(c[1]):null):null},setItem:function(b,c,d,e,f,g,h){if(!b||"expires"===b||"max-age"===b||"path"===b||"domain"===b||"secure"===b)return!1;var k="";if(d)switch(typeof d){case"number":k="; max-age="+d;break;case"string":k="; expires="+d;break;case"object":d.hasOwnProperty("toGMTString")&&(k="; expires="+d.toGMTString())}return void 0!==c&&null!==c?(f=(f="string"==typeof f?escape(f):i.DEFAULT_DOMAIN)?"; domain="+f:"",e=(e="string"==typeof e?escape(e):i.DEFAULT_PATH)?"; path="+e:"",document.cookie=escape((h?"":a)+b)+"="+escape(c)+k+f+e+(g?"; secure":""),j(),!0):i.removeItem(b,f,e,g,h)},removeItem:function(b,c,d,e,f){return b&&this.hasItem(b,f)?(c=(c="string"==typeof c?escape(c):i.DEFAULT_DOMAIN)?"; domain="+c:"",d=(d="string"==typeof d?escape(d):i.DEFAULT_PATH)?"; path="+d:"",document.cookie=escape((f?"":a)+b)+"=; expires="+h+c+d+(e?"; secure":""),j(),!0):!1},hasItem:function(b,c){return new RegExp("(?:^|;) *"+escape((c?"":a)+b)+"=").test(document.cookie)}},j=function(){i.length=i.getAll().length};return i.setItem(l,4),4==i.getItem(l)?(i.removeItem(l),i):f()}function f(){var a={},b=[],c={},d={STORE_TYPE:"memoryStorage",length:0,key:function(a){return b[a]},getItem:function(b){return a[b]},setItem:function(e,f){return null!==f&&void 0!==f?(void 0===c[e]&&(c[e]=(d.length=b.push(e))-1),a[e]=f):d.removeItem(e)},removeItem:function(e){var f=void 0!==a[e];if(void 0!==c[e]){for(var g=b.length;--g>c[e];)c[b[g]]--;b.splice(c[e],1),delete c[e]}return delete a[e],d.length=b.length,f},clear:function(){for(var e in a)a.hasOwnProperty(e)&&delete a[e];d.length=b.length=0,c={}}};return d}function g(a){function b(){var b=a.name,c=b.indexOf(k),f=b.indexOf(l),g=w.length;for(c>-1&&f>c&&(a.name=b.slice(0,c)+b.slice(f+s)),b="";g--;)v[w[g]]&&v[w[g]].value&&(b+=n+(""+w[g]).length+":"+(""+v[w[g]].value).length+o+w[g]+o+v[w[g]].value+p);a.name+=k+encodeURI(e.encode(d,b))+l}function c(){var c=a.name,f=c.indexOf(k),g=c.indexOf(l),h=0,i="",j=0,m=0;if(f>-1&&g>f)for(a.name=c.slice(0,f)+c.slice(g+s),c=e.decode(d,decodeURI(c.slice(f+r,g)));-1!==(f=c.indexOf(n,h));)h=f+t,-1!==(g=c.indexOf(o,h))&&(j=c.slice(h,g).split(":"),m=parseInt(j[1],10),j=parseInt(j[0],10),h=g+u,(g=c.indexOf(o,h))===h+j&&(i=c.substr(h,j),h=g+u,(g=c.indexOf(p,h))===h+m&&x.setItem(i,c.substr(h,m))));a.addEventListener?a.addEventListener("beforeunload",b,!0):a.attachEvent&&a.attachEvent("onbeforeunload",b)}a||(a=m);var d,e=function(a,b,c){return{decode:function(a,b){return this.encode(a,b)},encode:function(c,d){for(var e,f=c.length,g=d.length,h=[],i=[],j=0,k=0,l=0,m=0;256>j;j++)i[j]=j;for(j=0;256>j;j++)k=(k+(e=i[j])+c.charCodeAt(j%f))%256,i[j]=i[k],i[k]=e;for(k=0;g>l;l++)j=l%256,k=(k+(e=i[j]))%256,f=i[j]=i[k],i[k]=e,h[m++]=d.charCodeAt(l)^i[(f+e)%256];return b.apply(a,h)},key:function(d){for(var e=0,f=[];d>e;e++)f[e]=1+(255*c()<<0);return b.apply(a,f)}}}(String,String.fromCharCode,Math.random),f="[object Opera]"===Object.prototype.toString.call(window.opera);try{d=decodeURI(h.getItem(".sessionStorageKey"))}catch(g){}d&&d.length===q||(d=e.key(q),h.setItem(".sessionStorageKey",encodeURI(d)));var i=a.document.domain,j=e.encode(d,i),k="#"+String.fromCharCode(1)+"STOR/"+j,l=j+"/STOR"+String.fromCharCode(4)+"#",n=String.fromCharCode(2)+";",o=String.fromCharCode(23)+";",p=";"+String.fromCharCode(3),q=32,r=k.length,s=l.length,t=n.length,u=o.length,v=(p.length,{}),w=[],x={STORE_TYPE:"name",length:0,key:function(a){return w[a]},getItem:function(a){return v[a]?v[a].value:null},setItem:function(a,c){return v[a]?v[a].value=c:v[a]={value:c,index:(x.length=w.push(a))-1},f&&b(),c},removeItem:function(a){if(v[a]){if(w[v[a].index]===a){w.splice(v[a].index,1),x.length=w.length;for(var c=v[a].index,d=w.length;d>c;c++)v[w[c]].index--}return delete v[a],f&&b(),!0}return!1},clear:function(){w.length=0,v={},f&&b()}};try{c()}catch(g){}return x}var h,i,j,k,l="__SG__",m=window,n=(b="[object Object]"===Object.prototype.toString.call(a)?a:b||{}).prefix||"",o=b.no_cookie_fallback||!1,p=!0;b===a&&(a=null);try{for(;m!==m.top;)m=m.top}catch(q){}var r={cookieStorage:null,localStorage:null,memoryStorage:null,sessionStorage:null,_createCookieStorage:e,_createMemoryStorage:f};return r.cookieStorage=h=e(),r.memoryStorage=j=f(),r.sessionStorage=k=function(){var a=m.sessionStorage;if(a)try{a.setItem(l,1),a.removeItem(l);var b=function(){};b.prototype=a,b=new b;try{b.getItem&&(b.setItem(l,2),b.removeItem(l))}catch(e){b=null}a=b&&!b.getItem?d("sessionstorage",a):b&&"[object StoragePrototype]"!==Object.prototype.toString.apply(Storage.prototype)?b:c("sessionstorage",a)}catch(e){a=null}if(!a){try{a=g(),a.setItem(l,2),2==a.getItem(l)?a.removeItem(l):a=null}catch(e){a=null}a||(a=f())}return a._getItem=a.getItem,a._setItem=a.setItem,a._removeItem=a.removeItem,a._key=a.key,a.getItem=function(b){return a._getItem(n+b)},a.setItem=function(b,c){return a._setItem(n+b,c)},a.removeItem=function(b){return a._removeItem(n+b)},a.key=function(b){return void 0!==(b=a._key(b))&&null!==b?0===b.indexOf(n)?b.substr(n.length):b:null},a.clear=function(){for(var b,c=a.length;c--;)0===(b=a._key(c)).indexOf(n)&&a._removeItem(b)},a}(),r.localStorage=i=function(){var b;if(m.localStorage||m.globalStorage)try{b=m.localStorage||m.globalStorage[location.hostname],b.setItem(l,1),b.removeItem(l);var g=function(){};g.prototype=b,g=new g;try{g.getItem&&(g.setItem(l,2),g.removeItem(l))}catch(h){g=null}b=g&&!g.getItem?d("localstorage",b):g&&"[object StoragePrototype]"!==Object.prototype.toString.apply(Storage.prototype)?g:c("localstorage",b)}catch(h){b=null}return b||(b=function(){var c=function(a){return"PS"+a.replace(d,"__").replace(g,"_s")},d=/_/g,g=/ /g,h=c(n+"uData"),j=c("Storer");if(window.ActiveXObject)try{var k={},m=[],q={},s={STORE_TYPE:"userData",length:0,key:function(a){return m[a]},getItem:function(a){return t.getAttribute(c(a))},setItem:function(a,b){return null!==b&&void 0!==b?(t.setAttribute(c(a),b),void 0===q[a]&&(q[a]=(s.length=m.push(a))-1),t.save(h+j),k[a]=b):s.removeItem(a)},removeItem:function(a){if(t.removeAttribute(c(a)),void 0!==q[a]){for(var b=m.length;--b>q[a];)q[m[b]]--;m.splice(q[a],1),delete q[a]}return t.save(h+j),s.length=m.length,!0},clear:function(){for(var a,b=t.xmlDocument,c=b.firstChild.attributes,d=c.length;0<=--d;)a=c[d],delete k[a.nodeName],t.removeAttribute(a.nodeName),s.length--;t.save(h+j),s.length=m.length=0,k={},q={}}},t=document.createElement("input");t.style.display="none",t.addBehavior("#default#userData");var u="function"==typeof domReady?domReady:"undefined"!=typeof jQuery?jQuery(document).ready:!1;return p=!u,u&&u(function(){try{var c=document.body||document.getElementsByTagName("head")[0];if(c.appendChild(t),t.load(h+j),s.setItem(l,3),3==s.getItem(l)){s.removeItem(l);for(var d,g=t.xmlDocument,n=g.firstChild.attributes,p=-1,u=n.length;++p<u;)d=n[p],void 0!==d.nodeValue&&null!==d.nodeValue&&(q[d.nodeName]=m.push(d.nodeName)-1,k[d.nodeName]=d.nodeValue);r.localStorage=i=s,a&&a(r)}else s=null}catch(v){s=null}s||(r.localStorage=i=b=o?f():e(),a&&a(r))}),s}catch(v){}}()),b||(b=o?f():e()),n?(b._getItem=b.getItem,b._setItem=b.setItem,b._removeItem=b.removeItem,b._key=b.key,b.getItem=function(a){return b._getItem(n+a)},b.setItem=function(a,c){return b._setItem(n+a,c)},b.removeItem=function(a){return b._removeItem(n+a)},b.key=function(a){return void 0!==(a=b._key(a))&&null!==a?0===a.indexOf(n)?a.substr(n.length):a:null},b.clear=function(){for(var a,c=b.length;c--;)0===(a=b._key(c)).indexOf(n)&&b._removeItem(a)},b):b}(),p&&a&&a(r),r};